#!/usr/bin/env python
import sys
import rospy
from modules/sensor_publish import ArduinoMonitor
from modules.PS3_control import PS3Controller

time.sleep(5)
#read in serial port
serial_port = sys.argv[1]

def main():
    rospy.init_node('sensor_publish_and_control', anonymous = True)
    learnerRead = ArduinoMonitor(1, serial_port)
    learnerRead.start()
    controller = PS3Controller()
    rospy.loginfo('joystick vehicle controller starting')

    try:
        rospy.spin()
    except rospy.ROSInterruptException: pass
    rospy.loginfo('joystick vehicle controller finished')
    learnerRead.stop()

if __name__ == '__main__':
    main()

sys.exit(0)
